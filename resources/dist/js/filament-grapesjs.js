document.addEventListener("alpine:init",()=>{Alpine.data("grapesjs",({state:i,statePath:p,readOnly:c,tools:o,minHeight:r,container:t,uploadUrl:a})=>({instance:null,state:i,tools:o,init(){let g={},e=(this.state??"").split("<---!!! STYLE !!!--->");this.instance=grapesjs.init({height:r+"px",container:t||".filament-grapesjs .grapesjs-wrapper",showOffsets:!0,fromElement:!1,noticeOnUnload:!1,storageManager:!1,components:e[0],style:e[1],script:e[2],assetManager:{upload:a,uploadName:"files",assets:[],autoAdd:!1,onOpen:async()=>{let s=await(await fetch(a)).json();editor.AssetManager.add(s.data)}},plugins:["grapesjs-tailwind","grapesjs-preset-webpage","gjs-blocks-basic","grapesjs-plugin-forms","grapesjs-navbar","grapesjs-custom-code"]}),this.instance.on("update",l=>{var s=this.instance.getHtml({cleanId:!0}),n=s.match(/<body\b[^>]*>([\s\S]*?)<\/body>/);n?s=n[1]:s=this.instance.getHtml(),this.state=s+"<---!!! STYLE !!!--->"+this.instance.getCss()+"<---!!! STYLE !!!--->"+this.instance.getJs()})}}))});
