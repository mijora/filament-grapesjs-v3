document.addEventListener("alpine:init",()=>{Alpine.data("grapesjs",({state:r,statePath:c,readOnly:p,tools:o,minHeight:l,container:n,uploadUrl:t})=>({instance:null,state:r,tools:o,init(){let g={},a=(this.state??"").split("<---!!! STYLE !!!--->");this.instance=grapesjs.init({height:l+"px",container:n||".filament-grapesjs .grapesjs-wrapper",showOffsets:!0,fromElement:!1,noticeOnUnload:!1,storageManager:!1,components:a[0],style:a[1],script:a[2],assetManager:{upload:t,uploadName:"files",uploadFile:(i,s)=>fetch(t,{method:"POST",body:s}).then(e=>e.json()).then(e=>e),assets:async()=>await(await fetch(t)).json(),autoAdd:!0},plugins:["grapesjs-tailwind","grapesjs-preset-webpage","gjs-blocks-basic","grapesjs-plugin-forms","grapesjs-navbar","grapesjs-custom-code"]}),this.instance.on("update",i=>{var s=this.instance.getHtml({cleanId:!0}),e=s.match(/<body\b[^>]*>([\s\S]*?)<\/body>/);e?s=e[1]:s=this.instance.getHtml(),this.state=s+"<---!!! STYLE !!!--->"+this.instance.getCss()+"<---!!! STYLE !!!--->"+this.instance.getJs()})}}))});
